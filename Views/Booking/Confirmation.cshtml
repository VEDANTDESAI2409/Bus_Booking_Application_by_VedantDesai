@model BusBookingWebApp.Models.Booking

@{
    ViewData["Title"] = "Booking Confirmation";

    // calculate price safely
    var farePerSeat = Model.Schedule?.Fare ?? 0;
    var totalAmount = farePerSeat * Model.SeatsBooked;
}

<div class="container my-5">
    <div class="card shadow-lg border-0 p-5 rounded-4 text-center">
        <h2 class="text-primary">ğŸ‰ Booking Confirmed!</h2>
        <p class="lead">Thank you, <strong>@Model.CustomerName</strong> â€” your journey is ready!</p>

        <div class="mt-4 text-start d-inline-block">
            <p><strong>ğŸšŒ Bus:</strong> @(Model.Schedule?.Bus?.Name ?? "N/A")</p>
            <p><strong>ğŸ“ Route:</strong> @($"{Model.Schedule?.Bus?.Route?.From ?? "?"} â†’ {Model.Schedule?.Bus?.Route?.To ?? "?"}")</p>
            <p><strong>ğŸ—“ï¸ Travel Date:</strong> @Model.TravelDate.ToString("dd MMM yyyy")</p>
            <p><strong>â° Departure Time:</strong> @(Model.Schedule?.DepartureTime.ToString("hh:mm tt") ?? "N/A")</p>

            <p><strong>ğŸ’º Seats Booked:</strong> @Model.SeatsBooked</p>
            <p><strong>ğŸ”¢ Seat Numbers:</strong> @(string.IsNullOrWhiteSpace(Model.SelectedSeatNumbers) ? "N/A" : Model.SelectedSeatNumbers)</p>

            <hr />
            <p><strong>ğŸ’° Fare per Seat:</strong> â‚¹@farePerSeat</p>
            <p class="fs-5"><strong>ğŸ§¾ Total Price:</strong> <span class="text-success">â‚¹@totalAmount</span></p>
            <hr />

            <p><strong>ğŸ•’ Booking Time:</strong> @Model.BookingTime.ToString("dd MMM yyyy, hh:mm tt")</p>
        </div>
        <div class="mt-4">
        <a href="/Booking/MyBookings" class="btn btn-primary me-2">View My Bookings</a>
        <a href="/" class="btn btn-outline-secondary me-2">Back to Home</a>
        <a asp-action="DownloadTicket" asp-route-bookingId="@Model.Id" class="btn btn-success">
            ğŸ“„ Download Ticket (PDF)
        </a>
        </div>
    </div>
</div>
